import{b as K}from"./vue-router.13ff4542.js";import{g as O,h as Q,c as W,i as X}from"./news.9959d1d4.js";import{u as ee}from"./setting.7a705450.js";import{a as te,E as L,b as ae}from"./element-plus.57de7fca.js";import{d as oe,r as f,a3 as le,o as v,c as Y,a as b,_ as e,T as o,U as C,S as V,u as ne,a6 as i,ak as D,Y as r,Z as U}from"./@vue.acab0428.js";import"./index.82bb0ea4.js";import"./pinia.cc224967.js";import"./path-browserify.12fd8122.js";import"./axios.c0d44eb0.js";import"./lodash-es.082cdea4.js";import"./@vueuse.60d5afff.js";import"./@element-plus.2f5a972a.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./dayjs.180da8d0.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.cba15af0.js";const se={class:"wrapper"},ie={class:"table-head"},ue={class:"sch"},de=r("\u5168\u90E8"),re=r("\u672A\u53D1\u5E03"),ce=r("\u53D1\u5E03"),me=r("\u67E5\u8BE2"),pe=r("\u91CD\u7F6E"),_e={class:"new-item"},fe=r("\u65B0\u589E"),he=r("\u4FEE\u6539"),ge=r("\u5220\u9664"),Re=oe({__name:"newsList",setup(ve){ee();const B=K(),y=f([]);(()=>{O().then(t=>{y.value=t.data})})();const n=le({cateId:void 0,title:"",startTime:"",endTime:"",status:void 0,page:1,rows:10}),I=t=>{Array.isArray(t)?t.length>0?n.cateId=t[t.length-1]:n.cateId=void 0:t===null&&(n.cateId=void 0),c()},h=f(!0),F=f([]),T=f(0),N=f(),m=()=>{h.value=!0,Q(n).then(t=>{F.value=t.data,T.value=t.total,h.value=!1}).catch(()=>{h.value=!1})};m();const S=t=>{const l=[];let p=!1;function d(u){for(let s=0;s<u.length&&!p;s++)u[s].id===t?(l.push(u[s].name),p=!0):u[s].children&&u[s].children.length>0?(l.push(u[s].name),d(u[s].children)):s===u.length-1&&l.pop()}return d(y.value),l.join(" / ")},c=()=>{var t;(t=N.value)==null||t.clearSort(),n.page=1,m()},x=f(),M=()=>{x.value.resetFields(),c()},P=()=>{B.push({path:"newsEdit"})},R=t=>{B.push({path:"newsEdit",query:{id:t.id}})},A=t=>{h.value=!0;const l={id:t.id,status:t.status};W(l).then(p=>{L.success(p.msg),m()}).catch(()=>{m()})},$=t=>{ae.confirm("\u786E\u5B9A\u5220\u9664 "+t.title,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{X(t.id).then(l=>{L.success(l.msg),m()})})};return(t,l)=>{const p=i("el-input"),d=i("el-form-item"),u=i("el-cascader"),s=i("el-date-picker"),E=i("el-radio-button"),j=i("el-radio-group"),g=i("el-button"),q=i("el-form"),k=i("icon"),_=i("el-table-column"),G=i("el-switch"),Z=i("Page"),z=D("copy"),H=D("permission"),J=D("loading");return v(),Y("div",se,[b("div",ie,[b("div",ue,[e(q,{ref_key:"schFormRef",ref:x,inline:!0,model:n},{default:o(()=>[e(d,{label:"\u6807\u9898",prop:"title"},{default:o(()=>[e(p,{modelValue:n.title,"onUpdate:modelValue":l[0]||(l[0]=a=>n.title=a),placeholder:"\u8BF7\u8F93\u5165",clearable:"",onChange:c},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5206\u7C7B",prop:""},{default:o(()=>[e(u,{options:y.value,props:{value:"id",label:"name",children:"children",checkStrictly:!0,expandTrigger:"hover"},onChange:I,clearable:""},null,8,["options"])]),_:1}),e(d,{label:"\u53D1\u5E03\u65F6\u95F4",prop:"startTime"},{default:o(()=>[e(s,{modelValue:n.startTime,"onUpdate:modelValue":l[1]||(l[1]=a=>n.startTime=a),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"\u8D77",style:{width:"150px"},onChange:c},null,8,["modelValue"])]),_:1}),e(d,{label:"",prop:"endTime"},{default:o(()=>[e(s,{modelValue:n.endTime,"onUpdate:modelValue":l[2]||(l[2]=a=>n.endTime=a),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"\u81F3",style:{width:"150px"},onChange:c},null,8,["modelValue"])]),_:1}),e(d,{label:"\u53D1\u5E03\u72B6\u6001",prop:"status"},{default:o(()=>[e(j,{modelValue:n.status,"onUpdate:modelValue":l[3]||(l[3]=a=>n.status=a),onChange:c},{default:o(()=>[e(E,{label:""},{default:o(()=>[de]),_:1}),e(E,{label:0},{default:o(()=>[re]),_:1}),e(E,{label:1},{default:o(()=>[ce]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:o(()=>[e(g,{type:"primary",plain:"",onClick:c},{default:o(()=>[me]),_:1}),e(g,{onClick:M},{default:o(()=>[pe]),_:1})]),_:1})]),_:1},8,["model"])]),b("div",_e,[e(g,{type:"primary",onClick:P},{default:o(()=>[e(k,{name:"add"}),fe]),_:1})])]),C((v(),V(ne(te),{ref_key:"tableRef",ref:N,data:F.value},{default:o(()=>[e(_,{type:"index",width:"50"}),e(_,{prop:"createTime",label:"\u53D1\u5E03\u65F6\u95F4",align:"center",width:"200",sortable:""}),e(_,{prop:"title",label:"\u6807\u9898","min-width":"300"},{default:o(a=>[C((v(),Y("span",null,[r(U(a.row.title),1)])),[[z,a.row.title]])]),_:1}),e(_,{prop:"cateId",label:"\u5206\u7C7B","min-width":"140",sortable:""},{default:o(a=>[b("span",null,U(S(a.row.cateId)),1)]),_:1}),e(_,{prop:"status",label:"\u72B6\u6001",align:"center","min-width":"120",sortable:""},{default:o(a=>[e(G,{modelValue:a.row.status,"onUpdate:modelValue":w=>a.row.status=w,"active-value":1,"inactive-value":0,onChange:w=>A(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(_,{label:"\u64CD\u4F5C",align:"center",width:"200",fixed:"right","class-name":"manage-td"},{default:o(a=>[C((v(),V(g,{type:"primary",link:"",onClick:w=>R(a.row)},{default:o(()=>[e(k,{name:"edit"}),he]),_:2},1032,["onClick"])),[[H,["news:edit"]]]),C((v(),V(g,{type:"warning",link:"",onClick:w=>$(a.row)},{default:o(()=>[e(k,{name:"del"}),ge]),_:2},1032,["onClick"])),[[H,["news:del"]]])]),_:1})]),_:1},8,["data"])),[[J,h.value]]),e(Z,{currentPage:n.page,"onUpdate:currentPage":l[4]||(l[4]=a=>n.page=a),total:T.value,onGetList:m},null,8,["currentPage","total"])])}}});export{Re as default};
